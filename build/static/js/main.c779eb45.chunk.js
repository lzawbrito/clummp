(this.webpackJsonpclummp=this.webpackJsonpclummp||[]).push([[0],{1179:function(e,t,s){"use strict";s.r(t);var i=s(34),n=s.n(i),c=s(530),a=s.n(c),o=(s(538),s(56)),r=(s(539),s(124)),l=s.n(r),d=s(125),j=s.n(d),b=s(1),u=l()(j.a);function x(e){var t=[{z:e.obs,type:"heatmap",showscale:!1},{z:e.sim.data,type:"heatmap",showscale:!1,xaxis:"x2",yaxis:"y2"}],s={font:{family:"Roboto Mono, monospace"},plot_bgcolor:"#141414",paper_bgcolor:"#141414",grid:{rows:1,columns:2,pattern:"independent",xgap:.1},xaxis:{color:"white"},xaxis2:{color:"white"},yaxis:{scaleanchor:"x",color:"white"},yaxis2:{scaleanchor:"x2",color:"white"},annotations:[{text:"Observation",font:{size:24,color:"white"},showarrow:!1,align:"center",x:.25,y:1.1,xref:"paper",yref:"paper"},{text:"Simulation",font:{size:24,color:"white"},showarrow:!1,align:"center",x:.75,y:1.1,xref:"paper",yref:"paper"}]};return Object(b.jsx)(b.Fragment,{children:Object(b.jsx)(u,{divId:"visDisplay",data:t,layout:s})})}var h=l()(j.a);function m(e){var t=[{z:e.sim.diff,type:"heatmap",showscale:!0,colorbar:{tickfont:{color:"white"}}}];return Object(b.jsx)(b.Fragment,{children:Object(b.jsx)(h,{divId:"visDisplay",data:t,layout:{font:{family:"Roboto Mono, monospace",color:"white"},plot_bgcolor:"#141414",paper_bgcolor:"#141414",xaxis:{color:"white"},yaxis:{scaleanchor:"x",color:"white"},title:{text:"abs(Simulation - Observation)",font:{size:24}}}})})}var O=l()(j.a);function g(e){var t=e.viewSim,s=[{z:e.sim.data,type:"heatmap",showscale:!1}],i=[{z:e.obs,type:"heatmap",showscale:!1}],n={display:"block"},c={display:"none"};return t&&(n={display:"none"},c={display:"block"}),Object(b.jsxs)(b.Fragment,{children:[Object(b.jsx)("div",{style:n,children:Object(b.jsx)(O,{divId:"visDisplay",data:i,layout:{font:{family:"roboto mono, monospace",color:"white"},plot_bgcolor:"#141414",paper_bgcolor:"#141414",xaxis:{color:"white"},yaxis:{scaleanchor:"x",color:"white"},title:{text:"Observation",font:{size:24}},autosize:!0}})}),Object(b.jsx)("div",{style:c,children:Object(b.jsx)(O,{divId:"visDisplay",data:s,layout:{font:{family:"roboto mono, monospace",color:"white"},plot_bgcolor:"#141414",paper_bgcolor:"#141414",xaxis:{color:"white"},yaxis:{scaleanchor:"x",color:"white"},title:{text:"Simulation",font:{size:24}},autosize:!0}})})]})}function p(e){return"side-by-side"===(t=e.vis)?Object(b.jsx)(x,{sim:e.sim,obs:e.obs}):"diff"===t?Object(b.jsx)(m,{sim:e.sim,obs:e.obs}):"flicker"===t?Object(b.jsx)(g,{viewSim:e.viewSim,sim:e.sim,obs:e.obs}):void 0;var t}function v(e){return Object(b.jsxs)("span",{className:"textBox",children:[Object(b.jsxs)("label",{style:{marginRight:"5px"},children:[e.text,": "]}),Object(b.jsx)("input",{onChange:function(t){return e.change(t.target.value)},type:"text"})]})}var f=s(296),y=s.n(f);function w(e){if(e.error)return Object(b.jsxs)("div",{className:"errorMsg",children:["Error: ",e.error]});var t="idle"===e.status?"hiddenStatusBar":"statusBar";return"success"===e.status?Object(b.jsx)("div",{className:"successMsg",children:"Successfully loaded data."}):Object(b.jsxs)("div",{className:t,children:[Object(b.jsx)("div",{className:"status",children:e.task}),Object(b.jsx)(y.a,{className:"loadingAnimation",type:"bars"})]})}function S(e){var t=e.options.map((function(e){return Object(b.jsx)("option",{value:e,children:e})}));return Object(b.jsxs)(b.Fragment,{children:[Object(b.jsxs)("label",{children:[e.text,": "]}),Object(b.jsx)("select",{onChange:function(t){return e.change(t.target.value)},children:t})]})}var k=!1;function N(e){var t=s(518).default,n=Object(i.useState)(""),c=Object(o.a)(n,2),a=c[0],r=c[1],l=Object(i.useState)("1"),d=Object(o.a)(l,2),j=d[0],u=d[1],x=Object(i.useState)({obs:[],sims:[]}),h=Object(o.a)(x,2),m=(h[0],h[1],Object(i.useState)("idle")),O=Object(o.a)(m,2),g=O[0],p=O[1],f=Object(i.useState)(null),y=Object(o.a)(f,2),N=y[0],F=y[1];var V=Object(b.jsx)("button",{onClick:function(){console.log("handling request..."),p("loading"),F(null),t.get("/api/candidates/",{params:{n:parseInt(j),obsPath:a,applyLog:k}}).then((function(t){e.setData({obs:t.data.obs,sims:t.data.sims}),console.log(t.data.obs),console.log(t.data.sims),p("success"),console.log("Success.")})).catch((function(e){e.response?(F(e.response.data.message),console.log(e.response.data),console.log(e.response.status),console.log(e.response.headers)):e.request?console.log(e.request):console.log("Error",e.message)}))},children:"Submit"});return"loading"===g&&(V=Object(b.jsx)("button",{disabled:!0,children:"Submit"})),Object(b.jsxs)(b.Fragment,{children:[Object(b.jsx)(v,{text:"Observed data",change:r}),Object(b.jsx)("div",{style:{marginBottom:"10px"},children:Object(b.jsx)("span",{children:Object(b.jsx)(S,{text:"Apply logscale to obs.",change:function(e){if("Yes"===e)k=!0;else{if("No"!==e)return;k=!1}},options:["No","Yes"]})})}),Object(b.jsxs)("div",{className:"flexSpaced",children:[Object(b.jsx)("span",{children:Object(b.jsx)(S,{text:"Number of candidates",change:u,options:["1","2","3","4","5"]})}),V]}),Object(b.jsx)(w,{task:"Getting data...",status:g,error:N})]})}function F(e){return Object(b.jsxs)(b.Fragment,{children:[Object(b.jsx)("h3",{children:"Simulations:"}),Object(b.jsx)("div",{id:"fileList",children:Object(b.jsxs)("table",{children:[Object(b.jsxs)("tr",{children:[Object(b.jsx)("th",{children:"Rank"}),Object(b.jsxs)("th",{children:["t ",Object(b.jsx)("span",{style:{fontWeight:"normal",color:"rgb(200, 200, 200)"},children:"(Gyr)"})]}),Object(b.jsx)("th",{})]}),e.data.sims.map((function(t){function s(){e.setActiveSim(t),e.setActiveRank(t.rank)}var i,n=Object(b.jsx)("button",{onClick:s,children:"Show"});return R===t.rank&&(n=Object(b.jsx)("button",{onClick:s,disabled:!0,children:"Show"})),Object(b.jsxs)("tr",{children:[Object(b.jsx)("td",{children:t.rank}),Object(b.jsx)("td",{children:t.t.toFixed(2)}),Object(b.jsxs)("td",{align:"right",children:[Object(b.jsx)("a",{href:(i=t.id,"https://girder.hub.yt/#item/".concat(i)),target:"_blank",rel:"noreferrer",children:Object(b.jsx)("button",{className:"visButton",style:{marginRight:"5px"},children:"Open"})}),n]})]})}))]})})]})}var V="side-by-side",C=[{id:"side-by-side",text:"Side-by-side"},{id:"diff",text:"Difference"},{id:"flicker",text:"Flicker"}];function D(e){function t(t){console.log("pressed "+t.id),V=t.id,e.setVis(t.id)}return Object(b.jsxs)(b.Fragment,{children:[Object(b.jsx)("h3",{children:"Visualization: "}),Object(b.jsx)("div",{className:"buttonRow",children:C.map((function(e){return e.id===V?Object(b.jsx)("button",{className:"visButton",onClick:function(){return t(e)},disabled:!0,children:e.text}):Object(b.jsx)("button",{className:"visButton",onClick:function(){return t(e)},children:e.text})}))})]})}var z=[{text:"ROT",action:"cw",icon:s.p+"static/media/rotate-left-svgrepo-com.3a1dd75a.svg"},{text:"VERT FLIP",action:"flip-y",icon:s.p+"static/media/edit-flip-h-svgrepo-com.57019281.svg"},{text:"HORI FLIP",action:"flip-x",icon:s.p+"static/media/edit-flip-v-svgrepo-com.12c6485d.svg"}];function B(e){var t=Object(i.useState)("View Sim"),n=Object(o.a)(t,2),c=n[0],a=n[1];function r(){var t=e.toggleViewSim();a(t?"View Sim":"View Obs")}var l=s(518).default,d=e.data.sims.find((function(e){return e.rank===R})).name;return Object(b.jsxs)(b.Fragment,{children:[Object(b.jsx)("h3",{children:"Image Controls:"}),Object(b.jsxs)("div",{className:"buttonRow",children:[z.map((function(t){return Object(b.jsx)("button",{className:"visButton",onClick:function(){return s=t.action,void l.get("/api/transform/".concat(s,"/"),{params:{filename:d}}).then((function(t){e.setData(t.data),console.log("Success.")})).catch((function(e){e.response?(console.log(e.response.data),console.log(e.response.status),console.log(e.response.headers)):e.request?console.log(e.request):console.log("Error",e.message)}));var s},children:Object(b.jsx)("img",{src:t.icon,alt:t.action})})})),"flicker"===e.vis?Object(b.jsx)("button",{className:"visButton",onClick:r,children:c}):Object(b.jsx)("button",{className:"visButton",onClick:r,disabled:!0,children:c})]})]})}var R=1;function A(e){R=e,console.log("activeRank:",R)}function I(e){return Object(b.jsxs)(b.Fragment,{children:[Object(b.jsx)(F,{setActiveSim:e.setActiveSim,data:e.data,setActiveRank:A}),Object(b.jsx)(B,{data:e.data,setData:e.setData,vis:e.vis,toggleViewSim:e.toggleViewSim}),Object(b.jsx)(D,{setVis:e.setVis})]})}var _=s.p+"static/media/info-svgrepo-com.a2695485.svg";function M(e){return Object(b.jsx)(b.Fragment,{children:Object(b.jsxs)("div",{className:"sideBar",children:[Object(b.jsx)("div",{children:Object(b.jsx)("a",{href:"https://github.com/lzawbrito/clummp",target:"_blank",rel:"noreferrer",children:Object(b.jsx)("img",{id:"info",src:_,height:"20px",alt:"info"})})}),Object(b.jsxs)("div",{className:"centerText",children:[Object(b.jsxs)("h1",{id:"title",children:["CluMMP",Object(b.jsx)("span",{id:"versionTag",children:"v0.1"})]}),Object(b.jsx)("div",{id:"subtitle",children:"(Cluster Merger Matching Program)"})]}),Object(b.jsx)("div",{id:"request",children:Object(b.jsx)(N,{setData:e.setData})}),Object(b.jsx)("div",{id:"controlPanel",children:(t=e.data,0!==t.sims.length?Object(b.jsx)(I,{data:e.data,setData:e.setData,toggleViewSim:e.toggleViewSim,setVis:e.setVis,vis:e.vis,setActiveSim:e.setActiveSim}):Object(b.jsx)(b.Fragment,{}))})]})});var t}function P(e){return Object(b.jsx)("div",{id:"visFiller",children:"Load data using the control panel."})}var L=function(){var e=Object(i.useState)({obs:[],sims:[]}),t=Object(o.a)(e,2),s=t[0],n=t[1],c=Object(i.useState)({}),a=Object(o.a)(c,2),r=a[0],l=a[1],d=Object(i.useState)("side-by-side"),j=Object(o.a)(d,2),u=j[0],x=j[1],h=Object(i.useState)(!1),m=Object(o.a)(h,2),O=m[0],g=m[1];return Object(b.jsxs)("div",{className:"App",children:[Object(b.jsx)(M,{setData:function(e){n(e),l(e.sims[R-1])},data:s,setActiveSim:l,setVis:x,toggleViewSim:function(){return g(!O),O},vis:u}),function(e){return 0!==e.sims.length?Object(b.jsx)(p,{sim:r,obs:e.obs,vis:u,viewSim:O}):Object(b.jsx)(P,{})}(s)]})},q=function(e){e&&e instanceof Function&&s.e(3).then(s.bind(null,1186)).then((function(t){var s=t.getCLS,i=t.getFID,n=t.getFCP,c=t.getLCP,a=t.getTTFB;s(e),i(e),n(e),c(e),a(e)}))};a.a.render(Object(b.jsx)(n.a.StrictMode,{children:Object(b.jsx)(L,{})}),document.getElementById("root")),q()},538:function(e,t,s){},539:function(e,t,s){},761:function(e,t){},763:function(e,t){}},[[1179,1,2]]]);
//# sourceMappingURL=main.c779eb45.chunk.js.map